ใช้ BFS (Breadth-First Search) ในการแบ่งกลุ่มคนเป็นสองบริษัท เราจะอธิบายขั้นตอนการทำงานของโค้ดอย่างละเอียด ดังนี้:

หลักการคิด
การแปลงข้อมูลเป็นกราฟ:

เราจะใช้ กราฟ เพื่อแสดงความสัมพันธ์ระหว่างคนในเมือง โดยการเชื่อมโยงระหว่างคนสองคนที่เคยเล่นเป่ายิ้งฉุบกัน
ตัวแปร adj[] เป็น adjacency list ที่เก็บข้อมูลการเชื่อมโยงระหว่างคนแต่ละคน (คน A เชื่อมกับคน B ถ้า A และ B เคยเล่นเป่ายิ้งฉุบกัน)
การแบ่งกลุ่มคน (Bipartite Graph):

กราฟที่เราสร้างขึ้นจากข้อมูลการเล่นเป่ายิ้งฉุบสามารถแบ่งออกเป็นสองกลุ่มได้ (บริษัท 1 และบริษัท 2) หากมันเป็น Bipartite Graph หมายความว่า คนในแต่ละกลุ่มจะไม่เล่นเป่ายิ้งฉุบกัน
ถ้าคนสองคนในกราฟเล่นเป่ายิ้งฉุบกันและอยู่ในกลุ่มเดียวกัน (บริษัทเดียวกัน) จะทำให้กราฟไม่สามารถแบ่งกลุ่มได้ (ไม่เป็น bipartite)
การใช้ BFS เพื่อแบ่งกลุ่ม:

เราจะใช้ BFS (Breadth-First Search) เพื่อทำการแบ่งกลุ่มคนในกราฟเป็นสองบริษัท โดยการเริ่มจากคนใดคนหนึ่งแล้วใช้ BFS เพื่อเยี่ยมชมเพื่อนบ้านและกำหนดกลุ่มของแต่ละคน
การเยี่ยมชมคนครั้งแรกจะทำให้เราเลือกให้คนแรกอยู่ในบริษัท 1 (กำหนดสีเป็น 1) และเมื่อเราเยี่ยมชมเพื่อนบ้าน เราจะกำหนดให้เขาอยู่ในบริษัท 2 (กำหนดสีเป็น -1) และทำแบบนี้ไปจนกว่าผ่านทุกคนในกราฟ
ถ้าคนสองคนในกราฟเล่นเป่ายิ้งฉุบกันและอยู่ในกลุ่มเดียวกัน (สีเดียวกัน) จะทำให้กราฟไม่เป็น bipartite และเราเก็บคู่ที่ทำให้กราฟไม่สามารถแบ่งกลุ่มได้ไว้ในตัวแปร x และ y
การหาคู่ที่ทำให้กราฟไม่เป็น Bipartite:

เมื่อเราพบว่าไม่สามารถแบ่งกลุ่มได้ (โดยใช้ BFS หรือ DFS) หมายความว่าเราพบคู่ที่ทำให้กราฟไม่เป็น bipartite (คือคนสองคนในกลุ่มเดียวกันเคยเล่นเป่ายิ้งฉุบกัน)
เราจะเก็บคู่คนที่ผิดกฎนี้ไว้ในตัวแปร x และ y
การทำงานของโค้ด
การรับข้อมูล:

รับจำนวนคน n และจำนวนการเล่นเป่ายิ้งฉุบ m
สร้างกราฟจากข้อมูลการเล่นเป่ายิ้งฉุบ โดยใช้ adjacency list adj[]
การกำหนดสถานะของคน:

สร้างอาร์เรย์ color[] เพื่อเก็บสถานะของแต่ละคน (0: ยังไม่เยี่ยมชม, 1: บริษัท 1, -1: บริษัท 2)
เริ่มต้นทุกคนเป็น 0 (ยังไม่เยี่ยมชม)
การใช้ BFS เพื่อแบ่งกลุ่ม:

สำหรับคนทุกคนที่ยังไม่ถูกเยี่ยมชม:
เริ่มต้น BFS จากคนนั้น
กำหนดให้คนเริ่มต้นอยู่ในบริษัท 1 (สีเป็น 1)
เยี่ยมชมเพื่อนบ้านและกำหนดให้เขาอยู่ในบริษัท 2 (สีเป็น -1)
ถ้าพบว่าคนสองคนที่เล่นเป่ายิ้งฉุบกันอยู่ในบริษัทเดียวกัน (สีเดียวกัน) เก็บคู่นั้นไว้ในตัวแปร x และ y และหยุดการทำงาน
การแสดงผล:

พิมพ์คู่ที่ทำให้กราฟไม่สามารถแบ่งกลุ่มได้ (คนสองคนที่เล่นเป่ายิ้งฉุบกันและอยู่ในบริษัทเดียวกัน)

คำอธิบายโค้ด
การสร้างกราฟ:

ใช้ adjacency list adj[] เพื่อเก็บข้อมูลการเชื่อมโยงระหว่างคนแต่ละคน
การกำหนดสถานะของคน:

ใช้ `color[]